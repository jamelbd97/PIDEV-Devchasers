{% extends '/frontEnd/base.html.twig' %}
{% block content %}
    <section class="bg-home"
             style="background: url('https://via.placeholder.com/2000X1333//88929f/5a6270C/O https://placeholder.com/') center center;">
        <div class="bg-overlay"></div>
        <div class="home-center">
            <div class="home-desc-center">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-12">
                            <div class="title-heading text-center text-white">
                                <h1 class="heading font-weight-bold mb-4">Offres de travail pour la societe avec ID
                                    = {{ societe }}</h1>
                                <a href="{{ asset('/societe='~societe~'/offreDeTravail/ajouter') }}">
                                    <h4>Ajouter une offre de travail</h4>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="col-md-10 p-5">
        <table border="2" class="table">
            <tr>
                {% set labels =["ID", "Description", "Societe", "Categorie", "Candidatures"] %}
                {% for i in 0..labels|length-1 %}
                    <td><b>{{ labels[i] }}</b></td>
                {% endfor %}
                <td><b>Operations</b></td>
                {% for offreDeTravail in offreDeTravails %}
            <tr>
                <td>{{ offreDeTravail.id }}</td>
                <td>{{ offreDeTravail.description }}</td>
                <td>{{ offreDeTravail.societe.id }}</td>
                {% if offreDeTravail.categorie %}
                    <td>{{ offreDeTravail.categorie.description }}</td>
                {% else %}
                    <td></td>
                {% endif %}
                {% if offreDeTravail.candidatureOffre %}
                    <td>
                        {% for candidature in offreDeTravail.candidatureOffre %}
                            Candidature {{ candidature.id }} : {{ candidature.candidat.prenom }}
                            {{ candidature.offreDeTravail.description }} a {{ candidature.offreDeTravail.societe.nomSociete }}
                            <br>
                        {% endfor %}
                    </td>
                {% else %}
                    <td>
                        Aucune candidature
                    </td>
                {% endif %}
                <td>
                    {% set candidBool = false %}
                    {% if offreDeTravail.candidatureOffre %}
                        {% for candidature in offreDeTravail.candidatureOffre %}
                            {% if candidature.candidat.id == 1 %}
                                Vous avez candidat√© pour cette offre |
                                <a href="{{ asset('/societe='~offreDeTravail.societe.id~'/offreDeTravail='~offreDeTravail.id~'/candidatureOffre='~candidature.id~'/supprimer') }}">
                                    Supprimer candidature</a>
                                <br>------------<br>
                                <a href="{{ asset('/societe='~offreDeTravail.societe.id~'/offreDeTravail='~offreDeTravail.id~'/candidatureOffre='~candidature.id~'/revue/ajouter') }}">
                                    Ajouter une revue pour cette offre</a>
                                <br>------------<br>
                                {% set candidBool = true %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    {% if not candidBool %}
                        <a href="{{ asset('/societe='~offreDeTravail.societe.id~'/offreDeTravail='~offreDeTravail.id~'/candidatureOffre/ajouter') }}">
                            Candidater pour cette offre
                        </a><br>------------<br>
                    {% endif %}
                    <a href="{{ asset('societe='~offreDeTravail.societe.id) }}">
                        Consulter societe
                    </a> |
                    <a href="{{ asset('societe='~offreDeTravail.societe.id~'/offreDeTravail='~offreDeTravail.id~'/modifier/') }}">
                        Modifier
                    </a> |
                    <a href="{{ asset('societe='~offreDeTravail.societe.id~'/offreDeTravail='~offreDeTravail.id~'/supprimer/') }}">
                        Supprimer
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
{% endblock %}